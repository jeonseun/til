# 조건문, 반복문

조건문, 반복문 개념 정리

## TOC

- [조건문, 반복문 개요](#조건문-반복문-개요)
- [if 문](#if-문)
  - [else 문](#else-문)
  - [else if 문](#else-if-문)
- [삼항 연산자](#삼항-연산자)
- [switch 문](#switch-문)
  - [셀렉터 표현식](#셀렉터-표현식)
  - [switch 문과 break 문](#switch-문과-break-문)
- [if 문 vs switch 문](#if-문-vs-switch-문)
- [while 문](#while-문)
- [do while 문](#do-while-문)
- [for 문](#for-문)
- [무한루프](#무한루프)
- [반복문과 break 문, continue 문](#반복문과-break-문-continue-문)
  - [중첩 반복문에서의 break 문, continue 문](#중첩-반복문에서의-break-문-continue-문)
- [while 문 vs do while 문 vs for 문](#while-문-vs-do-while-문-vs-for-문)
- [조건문, 반복문의 중첩](#조건문-반복문의-중첩)

<br>

## 조건문, 반복문 개요

조건문과 반복문은 특정 조건에 따라 코드의 실행 흐름을 결정하는 실행문이다.

- 조건문 → 특정 조건에 따라 실행될 코드를 결정
- 반복문 → 특정 조건에 따라 코드의 반복 실행을 결정

> 조건식(boolean expression)
>
> 조건식은 표현식(expression) 중 반환값이 `boolean` 타입(또는 `Boolean` 타입)인 표현식을 말하며 `boolean` 타입의 변수/리터럴, 관계 연산자나 조건/논리 연산자의 반환값 등이 조건식으로 사용될 수 있다. 주로 조건문과 반복문에서 사용된다.

<br>

## if 문

`if` 문(if-then statement)는 조건식이 `true` 일 때 코드 블록을 실행하는 조건문이다.

```java
if (조건식) {
    // 조건식이 true일 때 실행할 코드
}
```

- 조건식이 `true` 일 때 `{}` 블록 내 코드를 실행
- 조건식이 `false` 이면 `{}` 블록 내 코드는 무시

어떤 수가 홀수 일때만 출력하는 예

```java
int num = (int) (Math.random() * 10) + 1; // 1 ~ 10 난수 생성

if (num % 2 == 1) {
    System.out.println(num);
}
```

### else 문

`else` 문(if-then-else statement)은 `if` 문과 함께 쓰이며 조건식이 `false` 일 때 코드 블록을 실행하는 조건문이다.

```java
if (조건식) {
    // 조건식이 true일 때 실행할 코드
} else {
    // 조건식이 false일 때 실행할 코드
}
```

- 조건식이 `true` 일 때는 `if` 문의 코드 블록을 실행
- 조건식이 `false` 일 때는 `else` 문의 코드 블록을 실행

어떤 수가 홀수인지 짝수인지 출력하는 예

```java
int num = (int) (Math.random() * 10) + 1; // 1 ~ 10 난수 생성

if (num % 2 == 0) {
    System.out.println(num + " = 짝수");
} else {
    System.out.println(num + " = 홀수");
}
```

### else if 문

`else if` 문은 `if` 문과 함께 쓰이며 여러개의 조건식 중 하나가 `true` 일 때 해당 코드 블록을 실행하는 조건문이다.

```java
if (조건식1) {
    // 조건식1이 true일 때 실행할 코드
} else if (조건식2) {
    // 조건식2가 true일 때 실행할 코드
} else if (조건식3) {
    // 조건식3이 true일 때 실행할 코드
} else {
    // 모든 조건식이 false일 때 실행할 코드
}
```

- 위에서 아래로 차례대로 조건식을 평가하여 `true` 가 되는 조건식의 코드 블록을 실행
- `true` 인 조건식이 나오면 남은 조건식은 모두 무시
- 조건식을 순서대로 평가하므로 뒤따르는 조건식이 간결해짐(앞선 조건식이 `false` 일 때만 평가하므로 해당 조건이 포함된 것과 마찬가지)

점수 구간별로 학점을 출력하는 예

```java
int score = 95;

if (score >= 90) {            // 90 <= score
    System.out.println("A");
} else if (score >= 80) {     // 80 <= score < 90
    System.out.println("B");
} else if (score >= 70) {     // 70 <= score < 80
    System.out.println("C");
} else if (score >= 60) {     // 60 <= score < 70
    System.out.println("D");
} else {                      //       score < 60
    System.out.println("F");
}
```

> 다중 `if` 문 vs `else if` 문
>
> `if` 문 여러개로도 `else if` 문을 대체할 수 있다. 단 `if` 문으로 구성할 경우 모든 조건식을 평가하고 `true` 인 모든 코드 블록을 실행하지만 `else if` 문은 여러 조건식 중 가장 먼저 `true` 로 평가되는 하나의 코드 불록만 실행하고 나머지 조건식은 무시한다. 따라서 `if` 문은 각 조건식이 독립적일 때 적합하며 `else if` 문은 조건식이 서로 연관되고 그 중 하나의 경우를 찾을 때 적합하다.

<br>

## 삼항 연산자

삼항 연산자(ternary operator)는 조건식의 평가 결과에 따라 특정 값을 구하는 상황에서 `if` 문을 대체해서 사용할 수 있다. 하나의 조건식과 두 개의 표현식으로 총 3개의 피연산자를 받는다.

```java
(조건식) ? (조건식 true 일 때 표현식) : (조건식 false 일 때 표현식);
```

- 삼항 연산자는 실행문이 아닌 연산자이므로 하나의 반환값을 가짐
- 조건식이 `true` 일 때 `:` 기준 왼쪽 피연산자 반환
- 조건식이 `false` 일 때 `:` 기준 오른쪽 피연산자 반환

숫자 값에 따라 "홀수"/"짝수"를 문자열에 대입하는 예

```java
int num = 10;
String result = num % 2 == 0 ? "짝수" : "홀수"; // 짝수
```

삼항 연산자는 `if-else` 문으로도 표현할 수 있다.

```java
int num = 10;
String result;

if (num % 2 == 0) {
    result = "짝수";
} else {
    result = "홀수";
}
```

> 삼항 연산자 중첩
>
> 삼항 연산자는 피연산자 자리에 또 다시 삼항 연산자를 쓰는 방식으로 중첩할 수 있다. 이는 중첩된 `if` 문과 동일한 효과를 낼 수 있지만 가독성과 유지보수에 좋지 않으므로 중첩하지 않는 것을 권장한다.

<br>

## switch 문

`switch` 문(switch statement)은 코드의 여러 분기중 하나를 선택하여 실행하는 조건문으로 셀렉터 표현식(selector expression)을 기준으로 셀렉터 표현식과 일치하는 라벨을 선택하는 방식으로 동작한다.

```java
switch (셀렉터 표현식) {
    case 라벨1:
        // 셀렉터 표현식이 라벨1과 같을 때 실행할 코드
        break;
    case 라벨2:
        // 셀렉터 표현식이 라벨2과 같을 때 실행할 코드
        break;
    case 라벨3:
        // 셀렉터 표현식이 라벨3과 같을 때 실행할 코드
        break;
    default:
        // 셀렉터 표현식과 일치하는 라벨이 없을 때 실행할 코드
}
```

- `switch` 문은 여러개의 `case` 라벨과 하나의 `default` 라벨(선택사항)로 구성
- 셀렉터 표현식과 일치하는 `case` 라벨의 코드 블록을 실행
- 실렉터 표현식과 일치하는 `case` 라벨이 없는 경우 `default` 라벨의 코드 블록을 실행
- 각 라벨은 별도의 `{}` 블록이 없어도 블록으로 취급

순위 1 ~ 3은 메달에 대응하고 나머지는 순위권 외로 출력하는 예

```java
int rank = 1;

switch (rank) {
    case 1:
        System.out.println("금");
        break;
    case 2:
        System.out.println("은");
        break;
    case 3:
        System.out.println("동");
        break;
    default: // 일치하는 case가 없을 때 실행될 코드
        System.out.println("순위권 외");
}
```

### 셀렉터 표현식

셀렉터 표현식은 `switch` 문에서 각 라벨과 비교하여 실행 될 코드 블록을 결정하는데 쓰이는 표현식이다.

셀렉터 표현식에 사용가능한 타입

- `byte`, `short`, `char`, `int` 타입 및 각각에 대응되는 wrapper 타입(`Byte`, `Short`, `Character`, `Integer`)
- `enum` 타입
- `String` 타입

셀렉터 표현식과 라벨의 비교 특징

- 셀렉터 표현식과 라벨은 같은 타입이어야 함
- 셀렉터 표현식과 라벨의 비교는 동등 비교 기반
  - `String` 타입의 경우 `equals()` 메서드를 통한 비교 수행
- 셀렉터 표현식이 reference type이면서 `null` 인 경우 `NullPointerException` 발생

> Pattern Matching for switch
>
> JDK 17부터 Preview feature로 공개되어 JDK 21에 정식으로 추가된 기능으로 기존 `switch` 문의 기능을 개선한 것이다. 이 기능의 추가로 `switch` 문에는 4가지 primitive type과 더불어 모든 종류의 reference type을 셀렉터 표현식으로 사용할 수 있으며 동등 비교 뿐만 아니라 Pattern Matching을 통해 보다 복잡한 비교도 가능해졌다.

### switch 문과 break 문

`switch` 문은 기본적으로 셀렉터 표현식과 일치하는 `case` 라벨의 아래 라벨까지 계속해서 실행한다. 이를 방지하는 것이 `break` 문의 역할로 각 라벨에 사용되어 해당 라벨의 코드 블록 실행 이후 `switch` 문이 종료되도록 한다.

`break` 문을 누락하여 여러 `case` 라벨의 코드가 실행되는 예

```java
int num = 1;

switch (num) {
    case 1:
        System.out.println("num = " + 1);
        // break; // break 누락!
    case 2:
        System.out.println("num = " + 2);
        // break; // break 누락!
}
```

`break` 누락으로 인해 일치하는 라벨인 `case 1:` 의 코드를 실행한 뒤 아래쪽 `case 2:` 의 코드까지 실행하게 된다.

```console
num = 1
num = 2
```

_의도적으로 `case` 라벨의 `break` 문을 누락시켜 여러 `case` 라벨이 하나의 코드 블록을 실행하도록 할 수 있지만 프로그램의 동작을 예측하기 어렵게 만들고 유지보수에 악영향을 줄 수 있으므로 권장되는 사항은 아니다._

> `default` 라벨과 `break` 문
>
> `default` 라벨도 `case` 라벨과 마찬가지로 `break` 문이 누락될 경우 아래의 코드 블록까지 실행한다. 그러나 일반적으로 `default` 라벨을 `switch` 문의 라벨 중 가장 아래에 작성하기 때문에 이 경우 `break` 문이 생략되어도 동작에는 차이가 없다.

<br>

## if 문 vs switch 문

JDK 21 이전까지는 `switch` 문에 복잡한 조건식을 사용할 수 없었지만 JDK 21에서 Pattern Mathcing for switch feature가 정식으로 추가됨에 따라 `switch` 문에도 복잡한 조건식을 사용할 수 있게 되었다. 따라서 JDK 21 이상을 사용한다는 전제하에 가독성과 요구사항에 따라 적절한 조건문을 선택해서 사용하면 된다.

JDK 21 이상 버전 기준

- 요구사항과 가독성에 따라 적절한 조건문 사용

JDK 21 이전 버전 기준

- 범위 기반의 조건 비교가 필요한 경우 `if` 문 사용
- 동등 비교로 충분한 경우 `switch` 문 사용, 단 `switch` 문은 `if` 문으로 대체할 수 있으므로 요구사항과 가독성을 최우선으로 고려

<br>

## while 문

`while` 문(while statement)은 조건식이 `true` 일 동안 코드 블록을 반복해서 실행하는 반복문이다.

```java
while (조건식) {
    // 조건식이 true인 동안 반복 실행될 코드
}
```

`while` 문의 실행 순서

1. 조건식 평가
2. 조건식이 `true` 인 경우 코드 블록 실행, 이후 조건식 다시 평가
3. 위 과정을 조건식이 `false` 가 될 때까지 반복

100에서 랜덤하게 숫자를 줄이며 0이하가 될 때 까지 반복하는 예

```java
int num = 100;

while (num > 0) { // num 이 0보다 클 동안 반복
    int reduction = (int) (Math.random() * 10) + 1;
    num -= reduction;
    System.out.println("줄이는 수: " + reduction);
    System.out.println("남은 수: " + num);
}
```

<br>

## do while 문

`do while` 문(do-while statement)도 `while` 문 처럼 조건식이 `true` 일 동안 코드 블록을 반복해서 실행하는 반복문이다. 단 `do while` 문은 어떠한 경우에도 한 번은 코드 블록을 실행한다는 차이점이 있다.

```java
do {
    // 조건식이 true인 동안 반복 실행될 코드, 최초 1회는 무조건 실행
} while (조건식);
```

`do while` 문의 실행 순서

1. `do` 문의 코드 블록을 실행
2. `while` 문의 조건식을 평가
3. 조건식이 `true` 인 경우 `do` 문의 코드 블록 실행, 이후 `while` 문의 조건식 다시 평가
4. 2 - 3의 과정을 조건식이 `false` 가 될 때까지 반복

1 ~ 10 사이의 숫자 맞추기 게임 예

```java
int answer = (int) (Math.random() * 10) + 1;

Scanner scanner = new Scanner(System.in);
int guess;

do {
    // 1회는 반드시 실행
    System.out.print("1 ~ 10 사이의 숫자 추측: ");
    guess = scanner.nextInt();
} while (guess != answer); // guess 가 answer 과 다를 동안 반복
```

<br>

## for 문

`for` 문(for statement)은 조건식이 `true` 일 때 반복 실행한다는 점에서는 다른 반복문과 같지만 문법 차원에서 반복 횟수와 관련된 변수를 선언하고 값을 조작할 수 있다는 점에서 차이가 있다.

```java
for (초기화식; 조건식; 증감식) {
    // 조건식이 true인 동안 반복 실행될 코드
}
```

- 초기화식 → `for` 문 내에서 사용할 변수를 선언/초기화하는 식
- 조건식 → 반복 수행을 결정하기 위한 조건식
- 증감식 → 코드 블록 실행 이후 주기적으로 실행됨

`for` 문의 실행 순서

1. 초기화식 실행(최초 1회만)
2. 조건식 평가
3. 조건식이 `true` 인 경우 코드 블록 실행
4. 증감식 실행, 이후 조건식 다시 평가
5. 2 - 3의 과정을 조건식이 `false` 가 될 때까지 반복

구구단 2단을 출력하는 예

```java
for (int i = 1; i <= 9; i++) {
    System.out.println("2 * " + i + " = " + 2 * i);
}
```

<br>

## 무한루프

반복문의 조건식이 항상 `true` 여서 종료되지 않는 경우를 무한루프라 한다. 서버처럼 종료되기 전까지 계속해서 실행되어야 하는 경우 사용된다. 단 의도하지 않은 무한루프는 심각한 문제가 되므로 주의해야 한다.

`while` 문과 `do while` 문은 조건식이 항상 `true` 면 무한루프가 된다.

```java
while (true) {
    // 영원히 반복 실행될 코드...
}

do {
    // 영원히 반복 실행될 코드...
} while (true);
```

`for` 문은 조건식을 명시하지 않으면 무한루프가 된다. 참고로 초기화식, 조건식, 증감식 모두 선택사항이므로 `for` 문으로 무한 루프를 만들 경우 다음과 같다.

```java
for (; ; ) {
    // 영원히 반복 실행될 코드...
}
```

<br>

## 반복문과 break 문, continue 문

`break` 문과 `continue` 문은 각각 반복문을 제어하기 위해 사용된다.

- `break` 문 → 반복문의 반복을 즉시 종료
- `continue` 문 → 반복문의 현재 실행을 건너뛰고 바로 조건식 평가로 이동, `for` 문에서는 증감식 실행으로 이동

숫자를 1씩 증가시키다가 10을 넘는 순간 반복문을 종료하는 예

```java
int num = 1;

while (true) {
    num++;

    if (num > 10) {
        break;
    }
}
```

10개의 숫자를 랜덤하게 생성할 때 3의 배수는 제외하고 출력하는 예

```java
for (int i = 0; i < 10; i++) {
    int num = (int) (Math.random() * 10) + 1;

    if (num % 3 == 0) {
        continue;
    }

    System.out.println(num);
}
```

### 중첩 반복문에서의 break 문, continue 문

반복문을 중첩해서 사용했을 때 `break` 문과 `continue` 문은 가장 가까운 반복문에만 적용된다.

```java
for (...) { // for 1
    for (...) { // for 2
        for (...) { // for 3
            break; // for 3를 종료
        }
        break; // for 2를 종료
    }
    break; // for 1를 종료
}
```

```java
while (...) { // while 1
    while (...) { // while 2
        while (...) { // while 3
            continue; // while 3의 조건식 평가로 이동
        }
        continue; // while 2의 조건식 평가로 이동
    }
    continue; // while 1의 조건식 평가로 이동
}
```

<br>

## while 문 vs do while 문 vs for 문

각 반복문은 기능적으로는 호환이 가능하지만 구조상의 특징으로 인해 특정 경우에 보다 효율적인 반복문이 존재한다.

- `while` 문
  - 조건식의 변수가 코드 블록 내에서 수정될 경우
  - 반복 횟수가 명확하지 않은 경우
- `do while` 문
  - 반드시 한번은 실행되어야 하는 경우
- `for` 문
  - 반복 횟수가 명확한 경우

<br>

## 조건문, 반복문의 중첩

조건문과 반복문은 모두 중첩이 가능하다. 조건문에 다른 조건문을 중첩하거나 반복문에 다른 반복문을 중첩하기도 하며 조건문과 반복문을 함께 중첩해서 사용하는 것도 가능하다. 단 조건문과 반복문의 중첩은 프로그램의 복잡도 및 성능에 직접적인 영향을 주기 때문에 주의해야 한다.

조건문 중첩 시 문제점

```java
if (...) {
    if (...) {
        // true - true 일 때 실행될 코드
    } else {
        // true - false 일 때 실행될 코드
    }
} else {
    if (...) {
        // false - true 일 때 실행될 코드
    } else {
        // false - false 일 때 실행될 코드
    }
}
```

`if else` 문 하나는 프로그램에 2개의 분기를 만든다. 예시처럼 중첩할 경우 총 4가지의 분기가 나오게되며 더 중첩할 경우에는 더 많은 분기가 생긴다. 이는 프로그램의 복잡도를 직접적으로 크게 상승시키므로 주의해야 한다.

반복문 중첩 시 문제점

```java
for (int i = 0; i < 10; i++) {
    for (int j = 0; j < 10; j++) {
        for (int k = 0; k < 10; k++) {

        }
    }
}
```

중첩 반복문의 실행 횟수는 외부 반복문의 실행 횟수 \* 내부 반복문의 실행 횟수가 된다. 따라서 각각 10회씩 반복하는 `for` 문을 3개 중첩할 경우 1000번의 루프를 돌게되며 각각 100회씩 반복한다면 1,000,000번의 루프를 돌게된다. 반복문 하나의 횟수가 그리 많지 않더라도 중첩될 경우 엄청나게 많은 횟수가 될 수 있으며 이는 성능에 악영향을 줄 수 있으므로 주의해야 한다.

<br>

## References

- [Control Flow Statements - Dev.java](https://dev.java/learn/language-basics/controlling-flow/)
- [Branching with Switch Statements - Dev.java](https://dev.java/learn/language-basics/switch-statement/)
- [Java Language Specification se21 #ch14 - Oracle](https://docs.oracle.com/javase/specs/jls/se21/html/jls-14.html)
- [김영한의 자바 입문 - 코드로 시작하는 자바 첫걸음 - 김영한, Inflearn](https://www.inflearn.com/course/%EA%B9%80%EC%98%81%ED%95%9C%EC%9D%98-%EC%9E%90%EB%B0%94-%EC%9E%85%EB%AC%B8)
