# 배열

배열 개념 정리

## TOC

- [배열 개요](#배열-개요)
- [배열 변수 선언](#배열-변수-선언)
- [배열 생성하기](#배열-생성하기)
  - [배열 이니셜라이저](#배열-이니셜라이저)
- [배열 요소 접근하기](#배열-요소-접근하기)
  - [인덱스 범위](#인덱스-범위)
- [다차원 배열](#다차원-배열)
  - [다차원 배열 변수 선언](#다차원-배열-변수-선언)
  - [다차원 배열 생성하기](#다차원-배열-생성하기)
  - [다차원 배열 요소 접근하기](#다차원-배열-요소-접근하기)
  - [지그재그 배열](#지그재그-배열)

<br>

## 배열 개요

배열(array)은 단일 타입의 변수 여러개를 고정된 수 만큼 저장할 수 있는 컨테이너(container) 객체(object)다.

![array overview](../resources/images/java/배열/array-overview.excalidraw.svg)

- 배열에 들어가는 각각의 변수를 요소(element)라 함
- 배열의 각 요소는 인덱스(index)로 접근
- 배열의 크기는 생성 시 고정

<br>

## 배열 변수 선언

배열을 담기 위한 변수도 일반적인 변수와 같이 타입과 변수의 이름을 지정해주어야 한다.

```java
// 기본구조: 타입[] 배열변수명
int[] numbers;        // int array
long[] bigNumbers;    // long array
double[] realNumbers; // double array
Object[] objects;     // Object array
String[] strings;     // String array
```

- 배열 요소의 타입에는 모든 종류의 primitive type, reference type을 지정할 수 있음
- 배열 변수 선언 시에는 크기를 지정하지 않음, 따라서 타입만 맞으면 다양한 크기의 배열을 변수에 담을 수 있음
- 배열 변수 선언 자체로는 배열을 생성하지 않음
- 배열 변수는 배열에 대한 참조값을 저장
- ~~C언어 스타일로 `int arr[]` 처럼 사용할 수 있으나 권장하지 않음~~

<br>

## 배열 생성하기

배열을 생성할 때는 `new` 키워드를 사용하며 배열의 요소 타입과 크기를 지정해주면 된다. 생성된 배열은 객체로 배열 변수에 할당하면 배열 변수를 통해 사용할 수 있게 된다.

```java
// 배열 생성 표현식: new 타입[배열크기]
int[] numbers = new int[5];     // int 타입 요소 5개짜리 배열 생성
String[] names = new String[3]; // String 타입 요소 3개짜리 배열 생성
```

- 배열의 크기는 고정된 양의 정수 리터럴 또는 변수
- `new` 키워드는 생성된 배열의 참조값을 반환하므로 반환된 참조값을 배열 변수에 할당
- 생성된 배열의 각 요소는 해당 타입의 기본값으로 초기화됨
  - 숫자 → `0`, `0.0`
  - `boolean` → `false`
  - reference type → `null`

### 배열 이니셜라이저

배열 이니셜라이저(array initializers)는 배열의 생성과 동시에 각 요소의 초기값을 지정할 수 있게 해주는 문법이다. 배열 생성 표현식과 함께 쓰거나 단독으로 쓸 수 있다.

```java
// new 타입[배열크기]
int[] numbers = new int[5];     // int 타입 요소 5개짜리 배열 생성
String[] names = new String[3]; // String 타입 요소 3개짜리 배열 생성

// 배열 이니셜라이저
// new 타입[]{elem1, elem2, elem3, elem4, ... elemN}
int[] scores = new int[]{10, 20, 30, 40, 50}; // 초기값이 10, 20, 30, 40, 50인 int 5개짜리 배열 생성
// {elem1, elem2, elem3, elem4, ... elemN}
double[] averages = {55.5, 42.6, 77.8, 90.0}; // 초기값이 55.5, 42.6, 77.8, 90.0인 double 4개짜리 배열 생성
```

- 배열 이니셜라이저 사용 시 배열 크기는 지정하지 않음
- 배열 이니셜라이저로 생성된 배열의 크기는 요소의 초기값 개수로 결정
- 배열 이니셜라이저를 쓸 때 배열의 타입은 요소의 초기값으로 결정

<br>

## 배열 요소 접근하기

배열의 요소는 인덱스를 통해 접근하며 인덱스는 0부터 시작하므로 크기가 n인 배열에 대해 유효한 인덱스 범위는 0 ~ (n - 1)이 된다.

```java
int[] numbers = {10, 20, 30, 40, 50};

System.out.println(numbers[0]); // 10
System.out.println(numbers[1]); // 20
System.out.println(numbers[2]); // 30
System.out.println(numbers[3]); // 40
System.out.println(numbers[4]); // 50
```

배열의 요소를 순서대로 모두 접근하는 경우 `for` 문을 사용하면 보다 쉽게 접근할 수 있다. `for` 문에서 인덱스로 사용할 변수를 생성하고 배열의 최대 인덱스까지 반복하도록 설정하면 된다.

```java
int[] numbers = {10, 20, 30, 40, 50};

for (int index = 0; index < numbers.length; index++) {
    System.out.println(numbers[index]);
}
```

> `array.length`
>
> 배열 객체는 사용할 수 있는 몇 가지 메서드와 필드가 있는데 그 중 `length` 는 해당 배열의 길이를 나타낸다. 따라서 인덱스의 유효범위를 확인할 때는 0부터 시작하는 인덱스의 특성을 고려해서 `length - 1` 까지만 접근하도록 지정하면 된다. 참고로 `length` 는 수정은 불가능 하고 읽기만 가능하다.

만약 인덱스 자체를 사용하지 않고 배열의 모든 요소에 접근하는 것이 목적이라면 향상된 `for` 문(enhanced for statement)를 사용할 수 있다.

```java
int[] numbers = {10, 20, 30, 40, 50};
// for (요소타입 접근할변수명 : 대상 배열) { ... }
for (int number : numbers) {
    System.out.println(number);
}
```

- `:` 기준으로 왼쪽은 배열에서 꺼낸 요소, 오른쪽은 대상 배열
- 배열의 첫번째 요소부터 마지막 요소까지 순서대로 접근

### 인덱스 범위

인덱스는 크기 n인 배열 기준 0 ~ (n - 1) 까지만 유효하다. 만약 유효범위를 벗어난 인덱스를 사용할 경우 예외가 발생한다.

```java
int[] numbers = new int[3];

numbers[0] = 10;
numbers[1] = 20;
numbers[2] = 30;
// numbers[3] = 40;  // ArrayIndexOutOfBoundsException 발생!
// numbers[-1] = 50; // ArrayIndexOutOfBoundsException 발생!
```

- 인덱스 유효범위는 컴파일 타임에 확인되지 않음
- 유효범위를 벗어난 인덱스 사용 시 `ArrayIndexOutOfBoundsException` 이 발생

<br>

## 다차원 배열

다차원 배열(multidimensional array)은 배열의 요소가 다른 배열인 경우를 말한다.

![multidimensional array](../resources/images/java/배열/multidimensional-array.excalidraw.svg)

- 2차원 배열의 경우 배열의 요소가 배열을 참조하는 구조이므로 개념적으로 행렬로 볼 수 있음
- 3차원, 4차원으로 차원이 많아질 때도 동일한 개념으로 확장

### 다차원 배열 변수 선언

다차원 배열 변수는 여러개의 `[]` 를 이용해 표현한다. `[]` 하나당 1개 차원을 의미한다.

```java
int[][] matrix;          // 2차원 배열, 행렬
double[][] location2d;   // 2차원 배열, xy축 좌표계
double[][][] location3d; // 3차원 배열, xyz축 좌표계
```

### 다차원 배열 생성하기

다차원 배열도 1차원 배열과 마찬가지로 배열 생성 표현식 또는 배열 이니셜라이저를 통해 생성할 수 있다.

```java
// 배열 생성 표현식
int[][] matrix = new int[5][5];                // 5 x 5 크기의 2차원 배열 생성
double[][][] location3d = new double[5][5][5]; // 5 x 5 x 5 크기의 3차원 배열 생성

// 배열 이니셜라이저
// 3 x 3 크기의 2차원 배열 생성 및 초기화
int[][] numbers = new int[][] {
        {1, 2, 3},
        {4, 5, 6},
        {7, 8, 9}
};
```

### 다차원 배열 요소 접근하기

다차원 배열의 요소에 접근할 때도 마찬가지로 인덱스를 사용한다.

- 2차원 배열 → `[행][열]`
- 3차원 배열 → `[면][행][열]`
- 차원이 늘어나도 같은 개념으로 확장

```java
int[][] matrix = {
        {1, 2, 3},
        {4, 5, 6}
};

System.out.println(matrix[0]);    // {1, 2, 3} 배열에 접근
System.out.println(matrix[0][0]); // {1, 2, 3} 배열 중 1 요소에 접근
```

다중 `for` 문을 사용하여 접근하면 다음과 같다.

```java
for (int i = 0; i < matrix.length; i++) {
    for (int j = 0; j < matrix[i].length; j++) {
        System.out.print(matrix[i][j] + " ");
    }
    System.out.println();
}

/*
  1 2 3
  4 5 6
*/
```

향상된 `for` 문을 사용하여 접근하면 다음과 같다. 다차원 배열에서 향상된 `for` 문을 쓸 때는 뽑아낸 요소 자체도 배열임에 주의하자.

```java
for (int[] rows : matrix) {
    for (int cell : rows) {
        System.out.print(cell + " ");
    }
    System.out.println();
}
```

3차원, 4차원 배열도 마찬가지로 3중, 4중의 중첩된 `for` 문을 사용하면 된다.

### 지그재그 배열

다차원 배열의 경우 배열의 각 요소가 같은 크기의 배열을 참조할 필요는 없으며 이 경우를 지그재그 배열(zigzag array)이라 한다. 따라서 다음과 같은 선언도 유효하다.

```java
int[][] numbers = new int[3][];
```

이 경우 행은 3개로 정해지지만 열의 길이는 정해지지 않으므로 다음과 같이 길이가 서로다른 배열을 참조하도록 만들 수 있다.

```java
for (int i = 0; i < numbers.length; i++) {
    numbers[i] = new int[i + 3]; // int[3], int[4], int[5] 의 배열을 각각 생성
}
```

<br>

## References

- [Creating Arrays in Your Programs - Dev.java](https://dev.java/learn/language-basics/arrays/)
- [Java Language Specificatino se21 #ch10 - Oracle](https://docs.oracle.com/javase/specs/jls/se21/html/jls-10.html)
- [김영한의 자바 입문 - 코드로 시작하는 자바 첫걸음 - 김영한, Inflearn](https://www.inflearn.com/course/%EA%B9%80%EC%98%81%ED%95%9C%EC%9D%98-%EC%9E%90%EB%B0%94-%EC%9E%85%EB%AC%B8)
